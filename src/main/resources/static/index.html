<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>成都理工大学教务管理系统</title>
    <style>
      html,body
      {
        height: 100%;
      }
      .ziti{color: black;}
      .table-bordered th,
  .table-bordered td {
    border: 1px solid #000 !important;
  }
  #curriculum_first_line{
  background-color: #c4cbcf;
  }
  #curriculum tr td:first-child{
    background-color: #c4cbcf;
  }
    </style>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <script src="js/jquery-3.6.0.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>

  </head>
  <body>
    <div class="container-fluid" style="height: 100%;background-color: #d0dfe6;" id="div-0">
      <div class="row" style="height: 5%;background-color: #8fb2c9;" id="div-1" >
        <div class="col-md-2">
          <img src="img/logo.png" style="width: auto;height:30px;">
        </div>
        <div class="col-md-3 col-md-offset-7" style="height: 100%;">
          <div class="btn-group pull-right" id="user_div">
            <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" id="user_button">
                <span id="top_name">admin</span>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu pull-right" role="menu">
                <li>
                    <a href="#" id="1" onclick="fun(event)">个人中心</a>
                </li>
                <li class="divider"></li>
                <li>
                    <a href="login.html">登出</a>
                </li>
            </ul>
        </div>
          
        </div>
      </div>
      <div class="row" style="height: 95%;" id="div-2">
        <div class="col-md-2 col-xs-2" style="height: 100%;background-color: #1a94bc;">
        </br>
		      <!-- 侧边栏标签页 -->
		      <ul class="nav nav-pills nav-stacked">
			      <!-- 侧边栏选项 -->
			      <li role="presentation">
				    <!-- 选项控制data-target对应的显隐 -->
				      <a href="#" data-toggle="collapse" data-target="#list1" class="btn btn-primary"><span class="ziti">教务管理</span></a>
				      <!-- 隐藏的详细菜单 -->
				      <ul id="list1" class="collapse in nav nav-pills nav-stacked">
					     <li><a href="#" id="1" onclick="fun(1)" class="btn btn-primary"><span class="ziti">功能1</span></a></li>
               <li class="divider"></li>
					     <li><a href="#" id="2" onclick="fun(2)" class="btn btn-primary"><span class="ziti">功能2</span></a></li>
				     </ul>
			      </li>
            
            <li role="presentation"><a href="#" id="3" onclick="fun(3)" class="btn btn-primary"><span class="ziti">学籍信息系统</span></a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a href="#" id="4" onclick="fun(4)" class="btn btn-primary"><span class="ziti">选课系统(老师)</span></a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a href="#" id="5" onclick="fun(5)" class="btn btn-primary"><span class="ziti">选课系统(学生)</span></a></li>
		      </ul>
        </div>


        <div class="col-md-10 col-xs-10" style="height: auto;background-color: #d0dfe6;" id="div-3">



          <div class="col-md-12" style="height: 95%;display: block;" id="page1">
            <div class="col-md-12" style="border-bottom:2px dashed #F00"></br></br><h1 class="text-center">个人中心</h1></br></div>
            <div class="col-md-4 text-center" style="height: auto;border-right:2px dashed #F00">
            </br></br></br>
              <p><img src="img/user.png"></p>
            <table class="table">
              <tr><td>姓名：</td><td id="main_name">吕凤骏</td></tr>
              <tr><td>性别：</td><td id="main_gender">女</td></tr>
              <tr><td>学号：</td><td id="main_id">201917030117</td></tr>
              <tr><td>手机号：</td><td id="main_ph">13000000000</td></tr>
              <tr><td>年龄：</td><td id="main_age">24</td></tr>
              <tr>
                <td><button onclick="show_edit_modal_me()" class="btn btn-primary" style="width: 100px;">修改信息</button></td>
                <td><button onclick="show_edit_modal_pass()" class="btn btn-primary" style="width: 100px;">修改密码</button></td>
              </tr>
            </table>
            </div>
            <div class="col-md-8" style="height: 100%;">
            </br></br></br></br></br>
            <table class="table table-bordered" id="curriculum">
              <thead><h1 class="text-center">课程表</h1></thead>
              <tr id="curriculum_first_line">
                <td>节次/周</td>
                <td>周一</td>
                <td>周二</td>
                <td>周三</td>
                <td>周四</td>
                <td>周五</td>
                <td>周六</td>
                <td>周日</td>
              </tr>
              <tr>
                <td>第一节</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
              </tr>
              <tr>
                <td>第二节</td><td>数据结构</td><td></td><td></td><td></td><td></td><td></td><td></td>
              </tr>
              <tr>
                <td>中午</td><td></td><td>数据隐私保护</td><td></td><td></td><td></td><td></td><td></td>
              </tr>
              <tr>
                <td>第三节</td><td></td><td></td><td></td><td></td><td>高等数学</td><td></td><td></td>
              </tr>
              <tr>
                <td>第四节</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
              </tr>
              <tr>
                <td>第五节</td><td></td><td></td><td>离散数学</td><td></td><td></td><td></td><td></td>
              </tr>
              
              
            </table>
            </div>
          </div>



          <div class="col-md-12" style="background-color: #d0dfe6;height: 100%;display: none;" id="page2">
            页面2
          </div>



          <div class="col-md-12" style="background-color: #d0dfe6;height: 100%;display: none;" id="page3">
            <div class="col-md-4" style="height: 100%; position: relative;margin-top: 12%;border-right:2px dashed #F00">
          <form class="form-horizontal" id="select_inf">
            <div class="form-group">
              <label for="inputEmail3" class="col-sm-3 control-label">姓名</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" id="find_name">
              </div>
            </div>
            <div class="form-group">
              <label for="inputEmail3" class="col-sm-3 control-label">学号</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" id="find_id">
              </div>
            </div>
            <div class="form-group">
                <label for="inputEmail3" class="col-sm-3 control-label">性别</label>
                <div class="col-sm-7">
                  <select class="form-control" id="find_sex">
                    <option value="0">男</option>
                    <option value="1">女</option>
                  </select>
                </div>
            </div>
            <div class="form-group">
              <label for="inputEmail3" class="col-sm-3 control-label">电话号码</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" id="find_ph" placeholder="格式：xxx-xxxx-xxxx">
              </div>
            </div>
            <div class="form-group">
              <label for="inputEmail3" class="col-sm-3 control-label">年龄</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" id="find_age">
              </div>
            </div>
            <div class="form-group text-center">
             <button onclick="show_modal_add()" class="btn btn-primary" style="width: 100px;">新增</button>
             <button onclick="table_find()" class="btn btn-primary" style="width: 100px;">确定</button>
             <button class="btn btn-primary" style="width: 100px;" type="reset">清空</button>
            </div>
          </form>
            </div>
            <div class="col-md-8 table-responsive" style="height: 100%;position: relative;">
              <table class="table table-hover caption-top table-striped" id="students_find">
                <h1 class="text-center">学生信息表</h1>
                <thead>
                  <tr>
                    <th>姓名</th>
                    <th>学号</th>
                    <th>性别</th>
                    <th>电话号码</th>
                    <th>年龄</th>
                    <th>设置</th>
                  </tr>
                </thead>
                <tbody id="all_data">
                  
                </tbody>
              </table>
            </div>
          </div>

          <!-- 增加学生信息用的模态框 -->
          <div class="modal fade" id="modal_add" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            &times;
                        </button>
                        <h1 class="modal-title" id="myModalLabel">
                            添加学生信息
                        </h1>
                    </div>
                    <div class="modal-body">
                      <form>
                        <div class="form-group">
                          <label for="recipient-name" class="col-form-label">姓名:</label>
                          <input type="text" class="form-control" id="add_name" required="required">
                        </div>
                        <div class="form-group">
                          <label for="recipient-name" class="col-form-label">学号:</label>
                          <input type="text" class="form-control" id="add_id" required="required">
                        </div>
                        <div class="form-group">
                          <label for="recipient-name" class="col-form-label">性别:</label>
                          <select class="form-control" id="add_sex" required="required">
                            <option value="0">男</option>
                            <option value="1">女</option>
                          </select>
                        </div>
                        <div class="form-group">
                          <label for="recipient-name" class="col-form-label">电话号码:</label>
                          <input type="text" class="form-control" id="add_ph" required="required" placeholder="格式：xxx-xxxx-xxxx">
                        </div>
                        <div class="form-group">
                          <label for="recipient-name" class="col-form-label">年龄:</label>
                          <input type="text" class="form-control" id="add_age" required="required">
                        </div>
                      </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                        </button>
                        <button type="button" class="btn btn-primary" id="edit_all" onclick="data_add()">
                            提交保存
                        </button>
                    </div>
                </div>
            </div>
        </div>
          <!-- 修改学生信息用的模态框 -->
          <div class="modal fade" id="modal_edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            &times;
                        </button>
                        <h1 class="modal-title" id="myModalLabel">
                            修改学生信息
                        </h1>
                    </div>
                    <div class="modal-body">
                      <form>
                        <div class="form-group">
                          <label for="recipient-name" class="col-form-label">姓名:</label>
                          <input type="text" class="form-control" id="edit_name">
                        </div>
                        <div class="form-group">
                          <label for="recipient-name" class="col-form-label">学号:</label>
                          <input type="text" class="form-control" id="edit_id" readonly>
                        </div>
                        <div class="form-group">
                          <label for="recipient-name" class="col-form-label">性别:</label>
                          <select class="form-control" id="edit_sex">
                            <option value="0">男</option>
                            <option value="1">女</option>
                          </select>
                        </div>
                        <div class="form-group">
                          <label for="recipient-name" class="col-form-label">电话号码:</label>
                          <input type="text" class="form-control" id="edit_ph" placeholder="格式：xxx-xxxx-xxxx">
                        </div>
                        <div class="form-group">
                          <label for="recipient-name" class="col-form-label">年龄:</label>
                          <input type="text" class="form-control" id="edit_age">
                        </div>
                      </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                        </button>
                        <button type="button" class="btn btn-primary" id="edit_all" onclick="data_edit()">
                            提交更改
                        </button>
                        <button type="button" class="btn btn-danger" id="edit_del" onclick="data_del()">
                          删除
                      </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- 修改个人中心用的模态框 -->
        <div class="modal fade" id="modal_edit_myself" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog">
              <div class="modal-content">
                  <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                          &times;
                      </button>
                      <h1 class="modal-title" id="myModalLabel">
                          修改个人信息
                      </h1>
                  </div>
                  <div class="modal-body">
                    <form>
                      <div class="form-group">
                        <label for="recipient-name" class="col-form-label">姓名:</label>
                        <input type="text" class="form-control" id="edit_name_me">
                      </div>
                      <div class="form-group">
                        <label for="recipient-name" class="col-form-label">学号:</label>
                        <input type="text" class="form-control" id="edit_id_me" readonly>
                      </div>
                      <div class="form-group">
                        <label for="recipient-name" class="col-form-label">性别:</label>
                        <select class="form-control" id="edit_sex_me">
                          <option value="0">男</option>
                          <option value="1">女</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <label for="recipient-name" class="col-form-label">电话号码:</label>
                        <input type="text" class="form-control" id="edit_ph_me" placeholder="格式：xxx-xxxx-xxxx">
                      </div>
                      <div class="form-group">
                        <label for="recipient-name" class="col-form-label">年龄:</label>
                        <input type="text" class="form-control" id="edit_age_me">
                      </div>
                    </form>
                  </div>
                  <div class="modal-footer">
                      <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                      </button>
                      <button type="button" class="btn btn-primary" id="edit_all" onclick="edit_msg_me()">
                          保存
                      </button>
                  </div>
              </div>
          </div>
      </div>
        <!-- 修改密码用的模态框 -->
        <div class="modal fade" id="modal_edit_pass" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog">
              <div class="modal-content">
                  <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                          &times;
                      </button>
                      <h1 class="modal-title" id="myModalLabel">
                          修改密码
                      </h1>
                  </div>
                  <div class="modal-body">
                    <form>
                      <div class="form-group">
                        <label for="recipient-name" class="col-form-label">学号:</label>
                        <input type="text" class="form-control" id="edit_id_me_p" readonly>
                      </div>
                      <div class="form-group">
                        <label for="recipient-name" class="col-form-label">密码:</label>
                        <input type="text" class="form-control" id="edit_pass" required="required">
                      </div>
                    </form>
                  </div>
                  <div class="modal-footer">
                      <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                      </button>
                      <button type="button" class="btn btn-primary" onclick="edit_pass()">
                          保存
                      </button>
                  </div>
              </div>
          </div>
      </div>

        <!-- 处理返回消息用的模态框 -->
        <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" id="modal_react">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h2 class="modal-title" id="modal_title">警告</h5>
              </div>
              <div class="modal-body">
                <h3 class="text-center" id="modal_msg"></h3>
                <p class="text-center"><img src="img/fail.jpg" class="img-circle"></p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>




          <div class="col-md-12" style="background-color: rgb(223, 193, 22);height: 100%;display: none;" id="page4">
            <div class="col-md-8 col-md-offset-2" style="height: 100%;position: relative;">
              <table class="table table-hover caption-top table-striped" id="class_find">
                <h1 class="text-center">选课信息表</h1>
                <thead>
                  <tr>
                    <th>课程</th>
                    <th>设置</th>
                  </tr>
                </thead>
                <tbody id="all_class_data">
                  <tr id="class_1"><td>专业英语</td><td><button class="btn btn-primary" onclick="class_find(1)">查看</button></td></tr>
                  <tr id="class_2"><td>操作系统</td><td><button class="btn btn-primary" onclick="class_find(2)">查看</button></td></tr>
                  <tr id="class_3"><td>近世代数</td><td><button class="btn btn-primary" onclick="class_find(3)">查看</button></td></tr>
                  <tr id="class_4"><td>普通地质学</td><td><button class="btn btn-primary" onclick="class_find(4)">查看</button></td></tr>
                  <tr id="class_5"><td>信号与系统</td><td><button class="btn btn-primary" onclick="class_find(5)">查看</button></td></tr>
                </tbody>
              </table>
            </div>
          </div>

        <!-- 老师选课用的模态框 -->
        <div class="modal fade" id="modal_class_teacher" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg">
              <div class="modal-content">
                  <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                          &times;
                      </button>
                      <h1 class="modal-title" id="class_name_choose"></h1>
                  </div>
                  <div class="modal-body">
                    <table class="table table-hover caption-top table-striped" id="class_find_T">
                      <h1 class="text-center">选课信息表</h1>
                      <thead>
                        <tr>
                          <th>姓名</th>
                          <th>学号</th>
                          <th>设置</th>
                        </tr>
                      </thead>
                      <tbody id="class_students_data">
                        <!-- <tr id="class_1"><td>吕凤骏</td><td>201917130114</td><td><button class="btn btn-danger" onclick="class_del_student(1)">删除</button></td></tr>
                        <tr id="class_2"><td>丁真</td><td>201917130114</td><td><button class="btn btn-danger" onclick="class_del_student(2)">删除</button></td></tr>
                        <tr id="class_3"><td>和世界</td><td>201917130115</td><td><button class="btn btn-danger" onclick="class_del_student(3)">删除</button></td></tr>
                        <tr id="class_4"><td>怪林</td><td>201917130116</td><td><button class="btn btn-danger" onclick="class_del_student(4)">删除</button></td></tr>
                        <tr id="class_5"><td>江</td><td>201917130114</td><td><button class="btn btn-danger" onclick="class_del_student(5)">删除</button></td></tr> -->
                      </tbody>
                    </table>
                  </div>
                  <div class="modal-footer">
                      <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                      </button>
                  </div>
              </div>
          </div>
      </div>

          <div class="col-md-12" style="height: 100%;display: none;" id="page5">
            <div class="col-md-8 col-md-offset-2" style="height: 100%;position: relative;">
              <table class="table table-hover caption-top table-striped" id="class_choose_student">
                <h1 class="text-center">选课信息表</h1>
                <thead>
                  <tr>
                    <th>课程</th>
                    <th>设置</th>
                  </tr>
                </thead>
                <tbody id="all_class_data">
                  <tr id="class_1"><td>专业英语</td><td><button class="btn btn-primary" onclick="class_choose(1)">选课</button></td></tr>
                  <tr id="class_2"><td>操作系统</td><td><button class="btn btn-primary" onclick="class_choose(2)">选课</button></td></tr>
                  <tr id="class_3"><td>近世代数</td><td><button class="btn btn-primary" onclick="class_choose(3)">选课</button></td></tr>
                  <tr id="class_4"><td>普通地质学</td><td><button class="btn btn-danger" onclick="class_choose(4)">退课</button></td></tr>
                  <tr id="class_5"><td>信号与系统</td><td><button class="btn btn-primary" onclick="class_choose(5)">选课</button></td></tr>
                </tbody>
              </table>
            </div>
          </div>



        </div>
      </div>
    </div>

    <script>
      //查询信息
      function table_find(){
        var name_f = $('#find_name').val();
        var sex_f = $('#find_sex option:selected').text();
        var age_f = $('#find_age').val();
        var ph_f = $('#find_ph').val();
        var id_f = $('#find_id').val();
        var data_f = {
          "userName":name_f,
          "userId":id_f,
          "gender":sex_f,
          "phoneNumber":ph_f,
          "age":age_f
        };
        //查询用ajax
       $.ajax({
       url:'/v1/info/find',
       type:'post',
       contentType: 'application/json;charset=utf-8',
       data:JSON.stringify(data_f),
       success:function(datas){
          var table=$("#all_data");
          table.empty();
          var td1;
          for(i=0;i<datas.length;i++)
          {
            td1+="<tr><td>"+datas[i].userName+"</td><td>"+datas[i].userId+"</td><td>"+datas[i].gender+"</td><td>"+datas[i].phoneNumber+"</td><td>"+datas[i].age+"</td><td><button class=\"btn btn-primary btn-sm edit\" onclick=\"show_edit_modal("+i+")\" id=edit_button_"+i+"\">修改</button>"+"</td>";
          }
          table.html(td1);
         },
        error:function(){
          $('#modal_title').html('警告');
          $('#modal_msg').html('查询失败，请检查网络情况');
          $('#modal_react').modal('show');
        }
       })
      }
   </script>
    <script>
      //修改、删除、增加
          function show_edit_modal(num) {//自动填入用户点击该行的信息
            $('#edit_name').val($("#students_find").find('tr').eq(num+1).find('td').eq(0).text());
            $('#edit_ph').val($("#students_find").find('tr').eq(num+1).find('td').eq(3).text());
            $('#edit_id').val($("#students_find").find('tr').eq(num+1).find('td').eq(1).text());
            $('#edit_age').val($("#students_find").find('tr').eq(num+1).find('td').eq(4).text());
            var sex = $("#students_find").find('tr').eq(num+1).find('td').eq(2).text();
            if(sex=="男")
            {
              $('#edit_sex').val('0');
            }else if(sex=="女"){
              $('#edit_sex').val('1');
            }
            $('#modal_edit').modal('show');
          };       
          function show_edit_modal_me() {//自动填入用户点击该行的信息
            $('#edit_name_me').val($("#main_name").html());
            $('#edit_ph_me').val($("#main_ph").html());
            $('#edit_id_me').val($("#main_id").html());
            $('#edit_age_me').val($("#main_age").html());
            var sex = $("#main_sex").html();
            if(sex=="男")
            {
              $('#edit_sex_me').val('0');
            }else if(sex=="女"){
              $('#edit_sex_me').val('1');
            }
            $('#modal_edit_myself').modal('show');
          };   
          function show_edit_modal_pass() {//自动填入用户点击该行的信息
            $('#edit_id_me_p').val($("#main_id").html());
            $('#modal_edit_pass').modal('show');
          };   
          function show_modal_add() {//显示新增信息
            $('#modal_add').modal('show');
          }; 
          //添加信息的ajax
          function data_add() {
                 var name_a = $('#add_name').val();
                 var sex_a = $('#add_sex').val();
                 var age_a = $('#add_age').val();
                 var ph_a = $('#add_ph').val();
                 var id_a = $('#add_id').val();
                 var data_a ={
                   "userName":name_a,
                   "userId":id_a,
                   "gender":sex_a,
                   "phoneNumber":ph_a,
                   "age":age_a
                 };
                 //添加用ajax
                 $.ajax({
                      url:'/v1/info/add',
                      data:JSON.stringify(data_a),
                      type:'post',
                      contentType: 'application/json;charset=utf-8',
                      success:function(datas){
                        if(datas.msg="success"){
                          $('#modal_title').html('通知');
                          $('#modal_msg').html('添加成功');
                          $('#modal_react').modal('show');
                        }else{
                          $('#modal_title').html('警告');
                          $('#modal_msg').html('添加失败，请联系管理员');
                          $('#modal_react').modal('show');
                        }
                      },
                      error:function(){
                        $('#modal_title').html('警告');
                        $('#modal_msg').html('添加失败，请检查网络情况');
                        $('#modal_react').modal('show');
                      }
                  })
              
              };


          //修改信息的ajax
          function data_edit() {
                 var name_n = $('#edit_name').val();
                 var sex_n = $('#edit_sex').val();
                 var age_n = $('#edit_age').val();
                 var ph_n = $('#edit_ph').val();
                 var id_n = $('#edit_id').val();
                 var data_n ={
                   "userName":name_n,
                   "userId":id_n,
                   "gender":sex_n,
                   "phoneNumber":ph_n,
                   "age":age_n
                 };
                 //修改用ajax
                 $.ajax({
                      url:'/v1/info/edit',
                      data:JSON.stringify(data_n),
                      type:'post',
                      contentType: 'application/json;charset=utf-8',
                      success:function(datas){
                        if(datas.msg="success"){
                          $('#modal_title').html('通知');
                          $('#modal_msg').html('修改成功');
                          $('#modal_react').modal('show');
                        }else{
                          $('#modal_title').html('警告');
                          $('#modal_msg').html('修改失败，请联系管理员');
                          $('#modal_react').modal('show');
                        }
                      },
                      error:function(){
                        $('#modal_title').html('警告');
                        $('#modal_msg').html('修改失败，请检查网络情况');
                        $('#modal_react').modal('show');
                      }
                  })
              
              };
              //删除的ajax
              function data_del() {
                 var id_d = $('#edit_id').val();
                 var data_d ={
                   "userId":id_d,
                 };
                 $.ajax({
                      url:'/v1/info/del',
                      type:'post',
                      data:JSON.stringify(data_d),
                      contentType: 'application/json;charset=utf-8',
                      success:function(datas){
                        if(datas.msg="success"){
                          $('#modal_title').html('通知');
                          $('#modal_msg').html('删除成功');
                          $('#modal_react').modal('show');
                        }else{
                          $('#modal_title').html('警告');
                          $('#modal_msg').html('删除失败，请联系管理员');
                          $('#modal_react').modal('show');
                        }
                      },
                      error:function(){
                        $('#modal_title').html('警告');
                        $('#modal_msg').html('删除失败，请检查网络情况');
                        $('#modal_react').modal('show');
                      }
                  })
              
              };
    </script>

    <script>
      //进入页面加载个人中心信息
      function main_msg(){
        data_mian_top = {
          "see":"cancanword"
        }
        $.ajax({
          url:'/v1/info/currentUser',
          type:'POST',
          data:JSON.stringify(data_mian_top),
          contentType: 'application/json;charset=utf-8',
          success:function(datas){
               $('#top_name').html(datas.userName);
               $('#main_name').html(datas.userName);
               $('#main_gender').html(datas.gender);
               $('#main_id').html(datas.userId);
               $('#main_ph').html(datas.phoneNumber);
          },
        })
      };
      $(document).ready(main_msg());
    </script>
    <script>
      //进入页面修改个人中心信息
    function edit_msg_me(){
        var name_m = $('#edit_name_me').val();
        var sex_m = $('#edit_sex_me').val();
        var age_m = $('#edit_age_me').val();
        var ph_m = $('#edit_ph_me').val();
        var id_m = $('#edit_id_me').val();
        var data_m ={
              "userName":name_m,
              "userId":id_m,
              "gender":sex_m,
              "phoneNumber":ph_m,
              "age":age_m,
        };
        $.ajax({
          url:'/v1/info/edit',
          type:'POST',
          data:JSON.stringify(data_m),
          contentType: 'application/json;charset=utf-8',
          success:function(datas){
            if(datas.msg="success"){
            $('#modal_title').html('通知');
            $('#modal_msg').html('修改成功');
            $('#modal_react').modal('show');
            main_msg();
            }else{
            $('#modal_title').html('警告');
            $('#modal_msg').html('修改失败，请联系管理员');
            $('#modal_react').modal('show');
            }
          },
          error:function(){
            $('#modal_title').html('警告');
            $('#modal_msg').html('修改失败，请检查网络情况');
            $('#modal_react').modal('show');
            }
         })
      };
      //修改密码
      function edit_pass(){
        var id_pass = $('#edit_id_me').val();
        var pass = $('#edit_pass').val();
        var data_pass ={
              "userId":id_pass,
              "pass":pass,
        };
        $.ajax({
          url:'/v1/info/edit',
          type:'POST',
          data:JSON.stringify(data_pass),
          contentType: 'application/json;charset=utf-8',
          success:function(datas){
            if(datas.msg="success"){
            $('#modal_title').html('通知');
            $('#modal_msg').html('修改成功');
            $('#modal_react').modal('show');
            main_msg();
            }else{
            $('#modal_title').html('警告');
            $('#modal_msg').html('修改失败，请联系管理员');
            $('#modal_react').modal('show');
            }
          },
          error:function(){
            $('#modal_title').html('警告');
            $('#modal_msg').html('修改失败，请检查网络情况');
            $('#modal_react').modal('show');
            }
         })
      };
    </script>

    <script>
      //查看选课的学生函数
    function class_find(num)
    {
      var class_name = $('#class_find').find('tr').eq(num).find('td').eq(0).text();
      $('#class_name_choose').html(class_name);
      data_cT = {
        className:class_name
      };
      $.ajax({
       url:'/v1/info/classT',
       type:'post',
       contentType: 'application/json;charset=utf-8',
       data:JSON.stringify(data_cT),
       success:function(datas){
          var table=$("#class_find_T");
          table.empty();
          var td1;
          for(i=0;i<datas.length;i++)
          {
            td1+="<tr><td>"+datas[i].userName+"</td><td>"+datas[i].userId+"</td><td><button class=\"btn btn-danger btn-sm edit\" onclick=\"class_del_student("+i+")\" >删除</button></td>";
          }
          table.html(td1);
          $('#modal_class_teacher').modal('show');
         },
        error:function(){
          $('#modal_title').html('警告');
          $('#modal_msg').html('查询失败，请检查网络情况');
          $('#modal_react').modal('show');
        }
       })
    };
    function class_del_student(num){
      var stuid = $("#class_find_T").find('tr').eq(num).find('td').eq(1).text();
      data_d_S={
        'useId':stuid
      }
      $.ajax({
        url:'/v1/info/classDelStudent',
        type:'post',
        contentType:'application/json;charset=utf-8',
        data:JSON.stringify(data_d_S),
        success:function(datas){
          if(datas.msg=="success")
          {
            class_find(num);
          }else{
            $('#modal_title').html('警告');
            $('#modal_msg').html('删除失败，请联系管理员');
            $('#modal_react').modal('show');
          }
        },
        error:function(){
            $('#modal_title').html('警告');
            $('#modal_msg').html('删除失败，请检查网络情况');
            $('#modal_react').modal('show');
        }
      })
    }
    </script>

    <script>
      //展示学生选课
      function show_student_class(){
        var id = $('#main_id').html();
        var data_class_show ={
           'userId':id
        };
        var magic = ["","","","",""];
        var class_all = ["专业英语","操作系统","近世代数","普通地质学","信号与系统"];
        $.ajax({
          url:'v1/info/classShowStudent',
          type:'post',
          contentType:'application/json;charset=utf-8',
          data:JSON.stringify(data_class_show),
          success:function(datas){
            magic[0]=datas.c1;
            magic[1]=datas.c2;
            magic[2]=datas.c3;
            magic[3]=datas.c4;
            magic[4]=datas.c5;
            for(i=0;i<=4;i++)
            {
              if(magic[i]=="0"){
                var string = "<button class=\"btn btn-primary\" onclick=\"class_choose("+i+")\" >选课</button>"
                $('#class_choose_student').find('tr').eq(i).find('td').eq(1).html(string);
              }else if(magic[i]=="1"){
                var string = "<button class=\"btn btn-danger\" onclick=\"class_choose("+i+")\" >退课</button>"
                $('#class_choose_student').find('tr').eq(i).find('td').eq(1).html(string);
              }
            }
          }
        })
      };
    
    
    
    //学生选课
      function class_choose(num){
        var class_name = $('#class_choose_student').find('tr').eq(num).find('td').eq(0).text();
        var id = $('#main_id').html();
        var data_class_name ={
           'userId':id,
           'className':class_name
        } ;
        $.ajax({
          url:'v1/info/classChoose',
          type:'post',
          contentType:'application/json;charset=utf-8',
          data:JSON.stringify(data_class_name),
          success:function(){
            if(datas.msg=="success"){
            $('#modal_title').html('通知');
            $('#modal_msg').html('选课成功');
            $('#modal_react').modal('show');
            show_student_class();
            }else{
              $('#modal_title').html('警告');
            $('#modal_msg').html('选课失败，请联系管理员');
            $('#modal_react').modal('show');
            }
          },
          error:function(){
            $('#modal_title').html('警告');
            $('#modal_msg').html('选课失败，请检查网络情况');
            $('#modal_react').modal('show');
          }
        })
      }
    </script>

    <script>
      //移动到按钮上自动显示
      function button_onload()
      {
          var button = document.getElementById("user_button");
          button.click();
      }
  </script>
    <script>//分区显示
      function fun(num){
          if(num==5){show_student_class()}
          for(i=1;i<=5;i++)
          {
            page_id="page"+i;
            document.getElementById(page_id).style.display="none";
          }
          page_id = "page"+num;
          document.getElementById(page_id).style.display="block";
      }
    </script>

  </body>
</html>